<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <AssemblyVersion>1.1.1.0</AssemblyVersion>
    <AssemblyName>dotnet-svcutil.xmlserializer</AssemblyName>
    <RootNamespace>Microsoft.Tools.ServiceModel.SvcUtil.XmlSerializer</RootNamespace>
    <TargetFrameworks>net8.0;net9.0</TargetFrameworks>
    <OutputType>Exe</OutputType>
    <TargetExt>.dll</TargetExt>
    <NoWarn>$(NoWarn);1634;1691;649;168;169;NU5129</NoWarn>
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
    <FileAlignment>512</FileAlignment>
    <DebugSymbols>true</DebugSymbols>
    <PlatformTarget>AnyCPU</PlatformTarget>
    <ProjectGuid>{EAB2959D-0A16-4F60-A453-765491E1C069}</ProjectGuid>
    <IsShipping>$(Ship_SvcUtilXmlSerPackages)</IsShipping>
  </PropertyGroup>

  <!--Package Properties-->
  <PropertyGroup>
    <IsPackable>true</IsPackable>
    <MajorVersion>8</MajorVersion>
    <MinorVersion>0</MinorVersion>
    <PatchVersion>0</PatchVersion>
    <PreReleaseVersionLabel>preview1</PreReleaseVersionLabel>
    <PackageReleaseNotes>https://github.com/dotnet/wcf/blob/master/release-notes/dotnet-svcutil.xmlserializer-notes.md</PackageReleaseNotes>
    <!-- The partial facade assembly's public key token must exactly match the contract to be filled. -->
    <StrongNameKeyId>Open</StrongNameKeyId>
    <Description>Generate XML serializers for types used by Service Contracts in an assembly.</Description>
    <MinClientVersion>2.12</MinClientVersion>
  </PropertyGroup>

  <!--The default source produced by the .NET SDK generates different class/namespace/filename than the old SDK, which breaks existing code.-->
  <!--Modifying the generated source to work with existing code.-->
  <!--Same as in src/System.Private.ServiceModel/src/System.Private.ServiceModel.csproj-->
  <ItemGroup>
    <EmbeddedResource Update="Resources\Strings.resx">
      <GenerateSource>true</GenerateSource>
      <ManifestResourceName>FxResources.dotnet.svcutil.xmlserializer.SR</ManifestResourceName>
      <GenerateResourcesCodeAsConstants>false</GenerateResourcesCodeAsConstants>
      <ClassName>System.SR</ClassName>
    </EmbeddedResource>
  </ItemGroup>

  <!--The default source generated by the .NET SDK does not contain a definition for 'SR.Format'.-->
  <!--Include a partial class containing the 'Format' methods called by the svcutil source code.-->
  <ItemGroup>
    <Compile Include="..\..\Common\src\System\SR.cs">
      <Link>Common\System\SR.cs</Link>
    </Compile>
  </ItemGroup>

  <Import Project=".\GenerateThisAssemblyCs.targets" />

  <ItemGroup>
    <None Include="..\files\prefercliruntime" Pack="true" PackagePath="\"/>
    <None Include="..\files\dotnet-svcutil.xmlserializer.targets" Pack="true" PackagePath="build/" />
  </ItemGroup>
</Project>
